<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ニュース | 新 高級ジェネ™ 公式サイト</title>
  <meta name="description" content="Super Hiko14がホストを運営するマインクラフト統合版サーバー『新 高級ジェネ』の公式サイト! 高級ジェネの運営メンバーやルールなどが記述されているページもあり、最新情報をお届けするニュースや、お問い合わせページ、Youtube、X、オープンチャット、Discordなどのリンクも記載!">
  <meta name="google-site-verification" content="9_dxQw3tiC3vs0ur8X4JLnf7vINwHN3m_qnyZO_3PDM" />

<!-- OGP (Open Graph Protocol) -->
  <meta property="og:title" content="新 高級ジェネ™ 公式サイト">
  <meta property="og:description" content="Super Hiko14がホストを運営するマインクラフト統合版サーバー『新 高級ジェネ』の公式サイト! 高級ジェネの運営メンバーやルールなどが記述されているページもあり、最新情報をお届けするニュースや、お問い合わせページ、Youtube、X、オープンチャット、Discordなどのリンクも記載!">
  <meta property="og:image" content="https://kokyujene.github.io/ogp.webp">
  <meta property="og:url" content="https://kokyujene.github.io">
  <meta property="og:type" content="website">

<!-- X(Twitter)用 -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Kokyujene">
  <meta name="twitter:title" content="新 高級ジェネ 公式サイト">
  <meta name="twitter:description" content="Super Hiko14がホストを運営するマインクラフト統合版サーバー『新 高級ジェネ』の公式サイト! 高級ジェネの運営メンバーやルールなどが記述されているページもあり、最新情報をお届けするニュースや、お問い合わせページ、Youtube、X、オープンチャット、Discordなどのリンクも記載!">
  <meta name="twitter:image" content="https://kokyujene.github.io/ogp.webp">

<!-- ico, etc... -->
  <link rel="icon" href="https://kokyujene.github.io/favicon.ico" type="image/x-icon">
  <link rel="icon" href="https://kokyujene.github.io/favicon.png" type="image/png">
  <link rel="shortcut icon" href="https://kokyujene.github.io/favicon.ico">
  <link rel="stylesheet" href="https://kokyujene.github.io/css/style.css">
  <link rel="shortcut icon" type="image/webp" href="https://kokyujene.github.io/favicon.webp">
  <link rel="icon" type="image/png" sizes="16x16" href="https://kokyujene.github.io/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://kokyujene.github.io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="https://kokyujene.github.io/favicon-48x48.png">

<!-- iOS Safari 用 -->
  <link rel="apple-touch-icon" sizes="180x180" href="https://kokyujene.github.io/apple-touch-icon.png">

<!-- Android / Chrome PWA 用 -->
  <link rel="manifest" href="https://kokyujene.github.io/site.webmanifest">

<!-- レガシー互換 -->
  <link rel="shortcut icon" href="https://kokyujene.github.io/favicon.ico">
</head>

<style>
  /* 最低限のローカルスタイル（既存と衝突しないように） */
  .news-controls { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:18px; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .news-controls button { padding:6px 10px; border-radius:6px; border:1px solid #ddd; background:#fff8ec; cursor:pointer; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .dark .news-controls button { padding:6px 10px; border-radius:6px; border:1px solid #1a1a1a; background:#1b1200; cursor:pointer; color: #fff6e5; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .news-controls button.active { background:#ffaa00; color:#fff; border-color:#e08900; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .news-list { display:block; gap:14px; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .news-item { padding:14px; border-radius:8px; background:#fff6e5; box-shadow:0 2px 8px rgba(0,0,0,0.06); margin-bottom:12px; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .dark .news-item { padding:14px; border-radius:8px; background:#1b1200; box-shadow:0 2px 8px rgba(0,0,0,0.06); margin-bottom:12px; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .news-meta { font-size:13px; color:#666; margin-bottom:8px; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .news-category { font-weight:700; padding:2px 8px; border-radius:999px; margin-right:8px; font-size:12px; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .cat-緊急 { background:#e74c3c; color:#fff; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .cat-特大お知らせ { background:#ff8c00; color:#fff; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .cat-ちょっとしたお知らせ { background:#2ecc71; color:#fff; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .cat-投票 { background:#888888; color:#fff; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .controls-right { margin-left:auto; display:flex; gap:8px; align-items:center; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
  .news-empty { color:#999; padding:20px; text-align:center; font-family: 'Minecraft', 'Unifont', 'Meiryo', Arial, Helvetica, sans-serif; }
</style>

<body>
<div class="wrapper">

<header>
  <a href="https://kokyujene.github.io/" class="logo">
    <img src="https://kokyujene.github.io/images/logo_icon.webp" alt="LOGO">
  </a>

  <nav class="nav-links">
    <ul>
      <li>
        <a href="https://kokyujene.github.io">
          <small class="sub-title">\-Home-/</small>
          <h3 class="h2-header">ホーム</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/members/">
          <small class="sub-title">\-Member-/</small>
          <h3 class="h2-header">メンバー紹介</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/rules/">
          <small class="sub-title">\-Rules-/</small>
          <h3 class="h2-header">ルール</h3>
        </a>
      </li>
      <li>
        <a href="https://kokyujene.github.io/news/">
          <small class="sub-title">\-News-/</small>
          <h3 class="h2-header">ニュース</h3>
        </a>
      </li>
    </ul>
  </nav>

  <img src="https://kokyujene.github.io/images/menu.webp" alt="メニュー" class="menu-icon">
  <img src="https://kokyujene.github.io/images/close.webp" alt="閉じる" class="close-icon">

<div id="mobileMenu" class="mobile-menu">
  <ul>
    <li>
      <a href="https://kokyujene.github.io">
        <small class="sm-sub-title">\-Home-/</small>
        <h3 class="sm-header">ホーム</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/members/">
        <small class="sm-sub-title">\-Members-/</small>
        <h3 class="sm-header">メンバー紹介</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/rules/">
        <small class="sm-sub-title">\-Rules-/</small>
        <h3 class="sm-header">ルール</h3>
      </a>
    </li>
    <li>
      <a href="https://kokyujene.github.io/news/">
        <small class="sm-sub-title">\-News-/</small>
        <h3 class="sm-header">ニュース</h3>
      </a>
    </li>
  </ul>
</div>
</header>

  <main class="container" style="padding:28px;">
      <h1 class="c2_h1">
      <small class=sub-title>\-News-/</small>ニュース</h1>

    <div class="news-controls" aria-hidden="false">
      <div>
        <button data-filter="all" class="active">すべて</button>
        <button data-filter="緊急">緊急</button>
        <button data-filter="特大お知らせ">特大お知らせ</button>
        <button data-filter="ちょっとしたお知らせ">ちょっとしたお知らせ</button>
        <button data-filter="投票">投票</button>
      </div>

      <div class="controls-right">
        <label for="sortSelect">並び:</label>
        <select id="sortSelect">
          <option value="new">新しい順</option>
          <option value="old">古い順</option>
        </select>
        <input id="q" placeholder="検索(タイトル・説明)" style="padding:6px;border-radius:6px;border:1px solid #ddd;">
      </div>
    </div>

    <div id="newsList" class="news-list">読み込み中…</div>
  </main>

<footer class="footer">
  <div class="footer-icons">
    <a href="https://line.me/ti/g2/NUmh2HQ_JhLH9x7VNaR1XAYqIePaEeziz5HClw" target="_blank">
      <img src="https://kokyujene.github.io/images/line-logo.webp" alt="LINE" class="footer-icon">
    </a>
    <a href="https://x.com/Kokyujene" target="_blank">
      <img src="https://kokyujene.github.io/images/x-logo.webp" alt="X" class="footer-icon">
    </a>
    <img id="theme-icon" src="https://kokyujene.github.io/images/moon.webp" alt="テーマ切替" class="theme-toggle-icon">
  </div>

  <div class="footer-text">
    © <span id="year"></span> KokyuJene™ All rights reserved. | 
    <a href="https://kokyujene.github.io/privacypolicy" class="footer-link">プライバシーポリシー</a> | 
    <a href="https://kokyujene.github.io/terms" class="footer-link">利用規約</a> | 
    <a href="https://kokyujene.github.io/license" class="footer-link">ライセンス</a> | 
    <a href="https://kokyujene.github.io/contact" class="footer-link">お問い合わせ</a>
  </div>
</footer>

<script src="https://kokyujene.github.io/js/script.js"></script>

<script>
const menuIcon = document.querySelector('.menu-icon');
const closeIcon = document.querySelector('.close-icon');
const mobileMenu = document.querySelector('.mobile-menu');

menuIcon.addEventListener('click', () => {
  mobileMenu.classList.add('active');
  menuIcon.style.display = 'none';
  closeIcon.style.display = 'block';
});

closeIcon.addEventListener('click', () => {
  mobileMenu.classList.remove('active');
  menuIcon.style.display = 'block';
  closeIcon.style.display = 'none';
});
</script>

<script>
    const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
      } else {
        entry.target.classList.remove('show');
      }
    });
  });

  document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>

<script>
(async function(){
  const newsListEl = document.getElementById('newsList');
  const filterButtons = document.querySelectorAll('[data-filter]');
  const sortSelect = document.getElementById('sortSelect');
  const qInput = document.getElementById('q');

  // fetch のパス：GitHub Pages 上では絶対パスで /news/news.json が安全
  const JSON_URL = 'news.json';

  let articles = [];

  async function loadData(){
    try {
      const res = await fetch(JSON_URL, { cache: 'no-cache' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      articles = await res.json();
      renderList();
    } catch(err){
      console.error(err);
      newsListEl.innerHTML = '<div class="news-empty">読み込みに失敗しました。<br>このテキストが表示された場合、サーバー運営にお知らせください。<br>よろしくお願いいたします。</div>';
    }
  }

  function formatDate(d){
    try {
      const dt = new Date(d);
      if (isNaN(dt)) return d;
      return dt.toLocaleDateString();
    } catch(e){ return d; }
  }

  function renderList(){
    const filter = document.querySelector('[data-filter].active')?.dataset.filter || 'all';
    const sortOrder = sortSelect.value;
    const q = (qInput.value || '').trim().toLowerCase();

    let list = articles.slice();

    // フィルタ
    if (filter !== 'all') {
      list = list.filter(it => (it.category || '') === filter);
    }

    // 検索
    if (q) {
      list = list.filter(it => (it.title+ ' ' + (it.description||'')).toLowerCase().includes(q));
    }

    // ソート
    list.sort((a,b) => {
      const ad = new Date(a.date).getTime() || 0;
      const bd = new Date(b.date).getTime() || 0;
      return sortOrder === 'new' ? bd - ad : ad - bd;
    });

    if (!list.length) {
      newsListEl.innerHTML = '<div class="news-empty">該当する記事はありません。</div>';
      return;
    }

    newsListEl.innerHTML = '';
    list.forEach(it => {
      const item = document.createElement('article');
      item.className = 'news-item';
      const catClass = 'cat-' + (it.category || '').replace(/\s+/g,'');
      item.innerHTML = `
        <div class="news-meta">
          <span class="news-category ${catClass}">»${it.category || '未分類'}«</span>
          <span>${formatDate(it.date)}</span>
        </div>
        <h3><a href="./${it.id}/" style="color:inherit;text-decoration:none">${it.title}</a></h3>
        <p>${it.description || ''}</p>
      `;
      newsListEl.appendChild(item);
    });
  }

  // UI イベント
  filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      filterButtons.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      renderList();
    });
  });
  sortSelect.addEventListener('change', renderList);
  qInput.addEventListener('input', () => { setTimeout(renderList, 150); });

  // 初回ロード
  await loadData();
})();
</script>

</body>
</html>